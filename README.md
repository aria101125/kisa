# 迷路生成アルゴリズム

## 道伸ばし法

1. field を壁で満たす
1. 基準点の座表をランダムな順番でまとめたリスト、base_xys を作る

1. for base_xy in base_xys:
    1. 最初の処理
       1. base_xyを起点として、ランダムに道を伸ばす
       2. 一定の長さになるか、進めなくなるかで終了し、次のループ処理に映る
    2. 2回目以降の処理
       1. base_xy がすでに道なら、ループの先頭に
       2. base_xy が壁ならば、そこを起点として、他の道につながるまで道をランダムに伸ばす(方法A)

### 他の道につながるまで道を伸ばす(方法A)

1. xy = base_xy
1. while True:
   1. (A) xy からの4方向の基準点を調べる（道idを出力）
   1. 壁がある場合
      1. その方向に道を伸ばし、伸ばした先をxy とする
      2. while loop の先頭にもどる
   1. 壁がない場合（行き止まり）
      1. 行き止まり対策(B)をして、while loop を終える

### 行き止まり対策(B)
1. 4方向の基準点を調べる
   1. 自分以外のidの道がある
         1. そこに道をつなげて、while から抜ける
   2. 自分以外のidしかない
         1. 今まで作ってきた道で、前の基準点にxy を戻す。
            1. 初めの基準点だったら、エラーを戻す
         2. はじめに戻る
         
